<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Template principal del informe que llama al documento base -->
    <template id="juan_report_saleorder">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="juan_sale_report.juan_report_saleorder_document" t-lang="doc.partner_id.lang"/>
            </t>
        </t>
    </template>

    <!-- Informe personalizado de pedido de venta -->
    <template id="juan_report_saleorder_document" inherit_id="sale.report_saleorder_document">
        
        <!-- AÃ±adir informaciÃ³n adicional despuÃ©s del bloque de informaciÃ³n -->
        <xpath expr="//div[@id='informations']" position="after">
            <div class="row mt-3 mb-3" style="background-color: #ecf0f1; padding: 15px; border-left: 4px solid #3498db; border-radius: 5px;">
                <div class="col-6">
                    <strong style="color: #2c3e50;">ðŸ“‹ InformaciÃ³n Adicional</strong>
                    <p class="mb-1" t-if="doc.payment_term_id">
                        <small>Condiciones de pago: <span t-field="doc.payment_term_id.name"/></small>
                    </p>
                    <p class="mb-1" t-if="doc.pricelist_id">
                        <small>Lista de precios: <span t-field="doc.pricelist_id.name"/></small>
                    </p>
                </div>
                <div class="col-6">
                    <strong style="color: #2c3e50;">ðŸ’¼ Comercial</strong>
                    <p class="mb-1" t-if="doc.user_id.email">
                        <small>Email: <span t-field="doc.user_id.email"/></small>
                    </p>
                    <p class="mb-1" t-if="doc.user_id.phone">
                        <small>TelÃ©fono: <span t-field="doc.user_id.phone"/></small>
                    </p>
                </div>
            </div>
        </xpath>

        <!-- Personalizar el estilo del thead de la tabla -->
        <xpath expr="//table[@class='o_has_total_table table o_main_table table-borderless']/thead/tr" position="attributes">
            <attribute name="style">background-color: #3498db; color: white;</attribute>
        </xpath>

        <!-- AÃ±adir pie de pÃ¡gina personalizado -->
        <xpath expr="//div[@class='oe_structure']" position="after">
            <div class="mt-4 pt-3" style="border-top: 2px solid #3498db; text-align: center;">
                <p style="color: #2c3e50; font-size: 1.1em;">
                    <strong>Â¡Gracias por confiar en nosotros!</strong>
                </p>
                <p style="color: #7f8c8d; font-size: 0.9em;">
                    Para cualquier consulta sobre este pedido, no dude en contactarnos
                </p>
            </div>
        </xpath>

    </template>

    <!-- Definir el informe -->
    <record id="juan_action_report_saleorder" model="ir.actions.report">
        <field name="name">Juan - Pedido de Venta</field>
        <field name="model">sale.order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">juan_sale_report.juan_report_saleorder</field>
        <field name="report_file">juan_sale_report.juan_report_saleorder</field>
        <field name="print_report_name">'Pedido - %s' % (object.name)</field>
        <field name="binding_model_id" ref="sale.model_sale_order"/>
        <field name="binding_type">report</field>
    </record>

</odoo>
